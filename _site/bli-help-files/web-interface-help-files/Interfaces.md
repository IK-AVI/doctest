Interfaces
==========

This section is for setting up the user interfaces generated by
BeoLiving Intelligence.

The main features that can be configured are:

+ The subset of resources and macros that appear for each zone.
+ Virtual resources, which provide a friendly way for interacting with
   some systems.
+ Sources and features of A/V products.
+ Lists of favorite channels and radio stations.
+ Access to IP cameras in the home.
+ Users which can access the system, and access restrictions.

The user interfaces generated from this configuration can be accessed
in several ways:

+ On mobile devices via BeoLiving App.
+ On the Web Panel, using any web browser.
+ On Bang & Olufsen NetworkLink TVs.
+ On externalcontrollers interfacing with BeoLiving Intelligence via the Home Integration Protocol.

**Synchronizing BeoLiving App:** BeoLiving App will automatically update
  its user interface to reflect changes in the **saved
  configuration**. This means that BeoLiving App will not reflect
  configuration changes in real time, but will update as soon as a
  configuration is saved.

## User management

### Installer (admin)

There is always a user called `admin` which is reserved for the
installer. The `admin` user has access for setting up BeoLiving Intelligence,
and also for accessing all zones via web or mobile interfaces.

Only the password for admin can be changed here.

### End users

Other users may be defined to allow acces to user interfaces for the
home owners, kids, etc.

The options for end users are:

- *User management access*, when selected, allows this user to add or
  edit other users. This option should be set for the home owner, but
  not for the kids or guests.
- *Controller* should normally be selected, and allows the user to
  acces BeoLiving Intelligence via mobile devices (BeoLiving App). When
  disabled, the only access for that user is via the web panel.
- *Zone access* provides a list of zones which the user has access to.
  For example, kids should not have access via their mobile apps into
  the main bedroom.

## Network cameras setup

In this section you can add the configuration for several network
cameras.

The optional user name and password are used for *basic HTTP
authentication* to the camera.

You must provide a base URL onto which all commands will be appended.
For example, `http://192.168.1.37/axis-cgi/`.

You must then provide commands for obtaining video and images both in
high and low resolution. For example, `mjpg/video.cgi` for the high
resolution video feed.

All commands will be appended to the base url provided.

Other optional commands can be provided for cameras with pan/tilt/zoom
control.

### Raw edit option

Entering all these fields into edit-boxes may be time consuming.

By pressing the *Raw edit* button, you are provided with a text
representation of all the fields. Here you can copy/paste, or edit in
your favorite text editor.

More important, you can copy all the text and then paste it when
setting up other similar cameras.

## Zone resource filtering

In this section, for each zone you can check and reorder the available
resources that will be shown to the user.

You have the option to hide unneeded resources in order to reduce
clutter. This is important for providing a good experience to the
user. Remember that, in day-to-day use, easy access to a few functions
is more desirable than accessing everything possible.

## Options for buttons and macros

Macros and buttons, which are represented as buttons on the user
interfaces, have further options:

- *Compact* will produce a half-width button. Two such buttons
  together will appear side by side.
- *On camera view* will also display this button / macro next to the
  IP camera images in that zone. For example, you may want to have an
  `All lights ON` and `All lights OFF` macro available next to the
  video feed.
- *Confirm* should be enabled for buttons which should not be pressed
  accidentally (for example, `Vacation mode`, or `Shades down`). When
  selected, a confirmation is required from the user.

## B&O products configuration

For each A/V product, there are some basic options, plus the list of
sources you wish to present to the user.

Product options:

- *Name*: you can rename the product here.
- *Address*: uneditable product address.
- *Force IP Address*: sets product IP address (*not recommended*).
- *Beo4 navigation*: whether the product is set up for the old Beo4
  navigation, or the new navigation with cursor keys and SELECT.

### Sources

For each NetworkLink product, available sources are discovered and added automatically.

In case of inconsistencies in the source list, sources can be queried directly from the product
by clicking on the `Force synchronization with product` button.

Hide sources you won't be using in order to reduce clutter in the
resulting user interfaces.

The information to provide for each source is the following:

-   *Source:* This is the source type.
-   *Name:* This is name of the discovered source.
-   *UI type:* This is an indication to the mobile application on what
    type of user interface is needed for operating the product. Choose
    the type that most suits your specific source or set-top box.
- *Favourites list:* This allows to select one of the favourite lists
    defined in the *Favourites* section. If something other than
    "None" is selected, mobile applications will show a favourites
    button for this source allowing channel/station selection.

### Favourites

This screen allows the definition of lists of favourite TV channels and
radio stations. Favourite lists can then be associated to one or more
sources.

The mobile application will show channel/station logos to the user for
easy channel selection, based on the selected favourite list.

Favourite lists are identified by a name. This name will show up in
the sources configuration section for each source.

For each favourite list a global delay and end command can be set that
will affect each favourite command. The end command will be added at the
end of each favourite command sequence and can be one of *PLAY* or
*SELECT*. The global delay will be added between all digits (CIFFER) and
between digits and the end command for each favourite command.

Also, a delay on source selection can be set. This delay that will be added
before the first digit of each favorite command, but only if the source was
effectively selected.

For each channel/station in a list, the following information should be
provided:

- *Caption:* a short description for the favourite.
- *Path:* the full URL of the logo image to show. It must point to a
    valid image as mobile applications will use it periodically to
    retrieve the logo. It can be set manually or using the logo
    picker.
- *Command:* the command to be executed once the logo is selected in
    mobile applications. Valid commands consist of one or more of the
    following elements, separated by a plus sign (*+*), which can be
    omitted in case of contiguous ciffers:
    - The digits *CIFFER\_0* to *CIFFER\_9*, optionally shortened as
    *0* to *9*.
    - *Delay: Nms* where N is a positive number indicating a delay in
        milliseconds.
    - *PLAY* or *SELECT* ending the sequence.
    - *MENU*.
    - *CNTL\_REWIND*, *CNTL\_WIND*, *CNTL\_STEP\_UP* and
    *CNTL\_STEP\_DW*, optionally shortened as *GREEN*, *YELLOW*,
    *BLUE* and *RED* respectively.

    For example:
    -   `CIFFER_1+Delay: 200ms+CIFFER_3+PLAY`, or using the abbreviated
        form: `1+Delay: 200ms+3+PLAY`.
    - `12`, with the global delay set to 100ms and global end command
        set to SELECT, is the same as `1+Delay: 100ms+2+Delay:
        100ms+SELECT` without global settings.

#### Logo picker

The logo picker shows as a pop-up window for selecting logos from the
B&O repository. It shows up by clicking the search button next to the
path field or by clicking on the logo itself.

Available logos are shown in groups of 50. The most convenient way to
search for a channel is by using the filter. Typing a search string will
immediately restrict the channels displayed to only the matching
entries. For example, typing `music` will show the channels that contain
the word "music" in its name.

Clicking on a logo will close the picker window and complete the path
and command fields, and show the selected logo. The caption will be also
updated except if it was edited explicitly: if the caption was empty, or
it was the exact name from the previous selection, it will be updated
with the name of the new selected channel; in other cases, the caption
was edited and will be unmodified.

*Note:* The logo picker is only available if your browser has an
Internet connection available. Also, the complete list of channels
must be retrieved the first time; this may take some seconds on a slow
connection.
