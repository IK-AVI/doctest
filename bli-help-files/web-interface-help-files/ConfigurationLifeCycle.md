Configuration versioning and backup
===================================

During setup of the system, BeoLiving Intelligence has a live configuration:
every time the installer makes a change in any of the configuration
screens, this change takes effect immediately. This configuration is
called the *current configuration*.

An *auto-save* version of the configuration is also saved
automatically whenever changes have been made.

You can save up to 10 revisions of the configuration, so you can
recall a previous revision if necessary.

You can also download or upload a configuration to your computer for
backup purposes.

All this functionality is available under the *Configuration* menu at
the top right of the screen.

Revision history
--------------

BeoLiving Intelligence keeps a record of *the last 10 configuration versions*.

You can explicitly save a new version by selecting `Configuration ->
Save revision`.

Every time you save your configuration, the following happens:

1. You are prompted for a short description of this revision.
2. The current configuration is copied to the head of the revision
   history.
3. If the history already contained 10 revisions, the oldest revision is
   discarded, in order to leave space for the new revision.
4. If there was an *auto-save* version, it is discarded.


So, if the system has the following revision history:

<table>
<tr><th> Rev</th><th> Date saved              </th><th> Name                   </th></tr>
<tr><td> r1 </td><td> Dec 20, 2013 9:31:59 AM </td><td> Basic integration      </td></tr>
<tr><td> r2 </td><td> Dec 27, 2013 6:41:52 PM </td><td> Macros for cinema mode </td></tr>
<tr><td>    </td><td> Jan 12, 2014 7:03:17 PM </td><td> Auto save              </td></tr>
</table>

After pressing **SAVE**, the current configuration will be copied into
a new revision (rev 3 in this example), and the auto-save
configuration will be discarded:

<table>
<tr><th> Rev</th><th> Date saved              </th><th> Name                   </th></tr>
<tr><td> r1 </td><td> Dec 20, 2013 9:31:59 AM </td><td> Basic integration      </td></tr>
<tr><td> r2 </td><td> Dec 27, 2013 6:41:52 PM </td><td> Macros for cinema mode </td></tr>
<tr><td> r3 </td><td> Jan 12, 2014 7:05:25 PM </td><td> Lighting scenes and automation </td></tr>
</table>

You need not save a revision for every change you make. Auto-save
takes care of small changes (see below).

Use revisions for major changes that you may wish to revert as a group
(by recalling a previous revision), or after a day's work at the
installation.

Also, saving (or auto saving) revisions serves as synchronization points
for all the clients connected to the gateway. For example, when you are
making changes and want to test them immediately on the BeoLiving App, you
can press [Shift+Ctrl+S] to create an auto-save revision (see below).

Auto-save configuration
-----------------------

When you are making changes, BeoLiving Intelligence will automatically save a
revision called *auto-save configuration* in the following situations:

- If you have made changes and then you've been idle for 30 seconds,
  or
- If you are still working on the configuration but there are unsaved
  changes for more than 5 minutes.

This means that while you are working on the current configuration,
BeoLiving Intelligence will ensure that your recent changes will be
periodically saved into the *auto-save configuration*.

An auto-save configuration can also be generated by selecting 
**Quick save revision** on the *Configuration* menu, or by pressing
[Shift+Ctrl+S] while navigating the administration interface.

Remember that explicitly saving a new revision will remove the
auto-save configuration, since the saved revision is up to date with
the current configuration.

Restarting BeoLiving Intelligence
--------------------------

If BeoLiving Intelligence is restarted (for example, after a power
failure), the configuration will be taken from the auto-save
configuration if it exists, or else from the newest revision.

Therefore, if you are working on the configuration and there is a
power cut, the most that you can lose are the latest 5 minutes of
changes.

Recalling a saved revision
--------------------------

You can revert to any of the 10 saved revisions, or to the auto-save
configuration.

Select `Configuration --> Revision history` and choose one of the
revisions.

The selected revision will be copied into the current configuration,
and become active immediately. It will be also saved as a new
auto-save configuration, named appropriately.


Uploading a configuration from your computer
--------------------------------------------

By selecting `Configuration -> Load from file`, you can upload a
configuration into BeoLiving Intelligence.

This uploaded configuration will substitute the current configuration
and become active immediately. It will be also saved as a new
auto-save configuration named "Upload".


Saving a revision to your computer
----------------------------------

By selecting `Configuration --> Download to file` you can download the
current configuration to you computer.

It is recommended that you take a copy of the configuration when
leaving the installation:

- It serves as a reference should the customer report a problem, or
  require help with the actual configuration.
- It is a backup of your work in case BeoLiving Intelligence is damaged.
